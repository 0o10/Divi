\hypertarget{class_c_coins_view_cache}{}\section{C\+Coins\+View\+Cache Class Reference}
\label{class_c_coins_view_cache}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}


{\ttfamily \#include $<$coins.\+h$>$}

Inheritance diagram for C\+Coins\+View\+Cache\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_c_coins_view_cache}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_c_coins_view_cache_a515a6f259af607fb3394b560d9c063c9}\label{class_c_coins_view_cache_a515a6f259af607fb3394b560d9c063c9}} 
{\bfseries C\+Coins\+View\+Cache} (\mbox{\hyperlink{class_c_coins_view}{C\+Coins\+View}} $\ast$base\+In)
\item 
\mbox{\Hypertarget{class_c_coins_view_cache_a1b62444593fdb580bfa4bd6fab41fafa}\label{class_c_coins_view_cache_a1b62444593fdb580bfa4bd6fab41fafa}} 
bool \mbox{\hyperlink{class_c_coins_view_cache_a1b62444593fdb580bfa4bd6fab41fafa}{Get\+Coins}} (const \mbox{\hyperlink{classuint256}{uint256}} \&txid, \mbox{\hyperlink{class_c_coins}{C\+Coins}} \&coins) const
\begin{DoxyCompactList}\small\item\em Retrieve the \mbox{\hyperlink{class_c_coins}{C\+Coins}} (unspent transaction outputs) for a given txid. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_c_coins_view_cache_aa8f0c55b6fc207d2188948a565125ab7}{Have\+Coins}} (const \mbox{\hyperlink{classuint256}{uint256}} \&txid) const
\item 
\mbox{\Hypertarget{class_c_coins_view_cache_a1190c94a943c067d13211179ef06470b}\label{class_c_coins_view_cache_a1190c94a943c067d13211179ef06470b}} 
\mbox{\hyperlink{classuint256}{uint256}} \mbox{\hyperlink{class_c_coins_view_cache_a1190c94a943c067d13211179ef06470b}{Get\+Best\+Block}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the block hash whose state this \mbox{\hyperlink{class_c_coins_view}{C\+Coins\+View}} currently represents. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_c_coins_view_cache_aa3f787f77b123f0fd340fbe4e458b4ad}\label{class_c_coins_view_cache_aa3f787f77b123f0fd340fbe4e458b4ad}} 
void {\bfseries Set\+Best\+Block} (const \mbox{\hyperlink{classuint256}{uint256}} \&\mbox{\hyperlink{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}{hash\+Block}})
\item 
bool \mbox{\hyperlink{class_c_coins_view_cache_a561bb7c6c97701b12c48fbbb563d0a91}{Batch\+Write}} (C\+Coins\+Map \&map\+Coins, const \mbox{\hyperlink{classuint256}{uint256}} \&\mbox{\hyperlink{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}{hash\+Block}})
\item 
const \mbox{\hyperlink{class_c_coins}{C\+Coins}} $\ast$ \mbox{\hyperlink{class_c_coins_view_cache_a8e5341e8b01233949d6170dd4d1fd75d}{Access\+Coins}} (const \mbox{\hyperlink{classuint256}{uint256}} \&txid) const
\item 
\mbox{\hyperlink{class_c_coins_modifier}{C\+Coins\+Modifier}} \mbox{\hyperlink{class_c_coins_view_cache_ab67c0d489873ed735c4fc52aa66f0830}{Modify\+Coins}} (const \mbox{\hyperlink{classuint256}{uint256}} \&txid)
\item 
bool \mbox{\hyperlink{class_c_coins_view_cache_ac9888d4feaa46666d03871cd7cd1c01d}{Flush}} ()
\item 
\mbox{\Hypertarget{class_c_coins_view_cache_a937e30d96fd43e403c862b193cf5b942}\label{class_c_coins_view_cache_a937e30d96fd43e403c862b193cf5b942}} 
unsigned int \mbox{\hyperlink{class_c_coins_view_cache_a937e30d96fd43e403c862b193cf5b942}{Get\+Cache\+Size}} () const
\begin{DoxyCompactList}\small\item\em Calculate the size of the cache (in number of transactions) \end{DoxyCompactList}\item 
C\+Amount \mbox{\hyperlink{class_c_coins_view_cache_a1a8cd6069fba96939ffcb1bd36ffb921}{Get\+Value\+In}} (const \mbox{\hyperlink{class_c_transaction}{C\+Transaction}} \&tx) const
\item 
\mbox{\Hypertarget{class_c_coins_view_cache_a5b1abd71c95dc7be2523b9c28839ec29}\label{class_c_coins_view_cache_a5b1abd71c95dc7be2523b9c28839ec29}} 
bool \mbox{\hyperlink{class_c_coins_view_cache_a5b1abd71c95dc7be2523b9c28839ec29}{Have\+Inputs}} (const \mbox{\hyperlink{class_c_transaction}{C\+Transaction}} \&tx) const
\begin{DoxyCompactList}\small\item\em Check whether all prevouts of the transaction are present in the U\+T\+XO set represented by this view. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_c_coins_view_cache_a111d5a94709eaccd57bafe6ab1d938af}\label{class_c_coins_view_cache_a111d5a94709eaccd57bafe6ab1d938af}} 
double \mbox{\hyperlink{class_c_coins_view_cache_a111d5a94709eaccd57bafe6ab1d938af}{Get\+Priority}} (const \mbox{\hyperlink{class_c_transaction}{C\+Transaction}} \&tx, int n\+Height) const
\begin{DoxyCompactList}\small\item\em Return priority of tx at height n\+Height. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_c_coins_view_cache_a54a0de51586fa92d83cfa321fb8936c5}\label{class_c_coins_view_cache_a54a0de51586fa92d83cfa321fb8936c5}} 
const \mbox{\hyperlink{class_c_tx_out}{C\+Tx\+Out}} \& {\bfseries Get\+Output\+For} (const \mbox{\hyperlink{class_c_tx_in}{C\+Tx\+In}} \&input) const
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_c_coins_view_cache_a363e27234d36bb0fc533d60cd64d1bc3}\label{class_c_coins_view_cache_a363e27234d36bb0fc533d60cd64d1bc3}} 
bool {\bfseries has\+Modifier}
\item 
\mbox{\hyperlink{classuint256}{uint256}} \mbox{\hyperlink{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}{hash\+Block}}
\item 
\mbox{\Hypertarget{class_c_coins_view_cache_af33cc2c6d38af65ac833d4d13c8e3764}\label{class_c_coins_view_cache_af33cc2c6d38af65ac833d4d13c8e3764}} 
C\+Coins\+Map {\bfseries cache\+Coins}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_c_coins_view_cache_ae6ce8219acb79950bced74cb108acacf}\label{class_c_coins_view_cache_ae6ce8219acb79950bced74cb108acacf}} 
class {\bfseries C\+Coins\+Modifier}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\mbox{\hyperlink{class_c_coins_view}{C\+Coins\+View}} that adds a memory cache for transactions to another \mbox{\hyperlink{class_c_coins_view}{C\+Coins\+View}} 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_c_coins_view_cache_a8e5341e8b01233949d6170dd4d1fd75d}\label{class_c_coins_view_cache_a8e5341e8b01233949d6170dd4d1fd75d}} 
\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Access\+Coins@{Access\+Coins}}
\index{Access\+Coins@{Access\+Coins}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection{\texorpdfstring{Access\+Coins()}{AccessCoins()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_c_coins}{C\+Coins}} $\ast$ C\+Coins\+View\+Cache\+::\+Access\+Coins (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classuint256}{uint256}} \&}]{txid }\end{DoxyParamCaption}) const}

Return a pointer to \mbox{\hyperlink{class_c_coins}{C\+Coins}} in the cache, or N\+U\+LL if not found. This is more efficient than Get\+Coins. Modifications to other cache entries are allowed while accessing the returned pointer. \mbox{\Hypertarget{class_c_coins_view_cache_a561bb7c6c97701b12c48fbbb563d0a91}\label{class_c_coins_view_cache_a561bb7c6c97701b12c48fbbb563d0a91}} 
\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Batch\+Write@{Batch\+Write}}
\index{Batch\+Write@{Batch\+Write}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection{\texorpdfstring{Batch\+Write()}{BatchWrite()}}
{\footnotesize\ttfamily bool C\+Coins\+View\+Cache\+::\+Batch\+Write (\begin{DoxyParamCaption}\item[{C\+Coins\+Map \&}]{map\+Coins,  }\item[{const \mbox{\hyperlink{classuint256}{uint256}} \&}]{hash\+Block }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Do a bulk modification (multiple \mbox{\hyperlink{class_c_coins}{C\+Coins}} changes + Best\+Block change). The passed map\+Coins can be modified. 

Reimplemented from \mbox{\hyperlink{class_c_coins_view_backed_ace15da3934c9d7a9cb9c7a787f92f764}{C\+Coins\+View\+Backed}}.

\mbox{\Hypertarget{class_c_coins_view_cache_ac9888d4feaa46666d03871cd7cd1c01d}\label{class_c_coins_view_cache_ac9888d4feaa46666d03871cd7cd1c01d}} 
\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Flush@{Flush}}
\index{Flush@{Flush}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection{\texorpdfstring{Flush()}{Flush()}}
{\footnotesize\ttfamily bool C\+Coins\+View\+Cache\+::\+Flush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Push the modifications applied to this cache to its base. Failure to call this method before destruction will cause the changes to be forgotten. If false is returned, the state of this cache (and its backing view) will be undefined. \mbox{\Hypertarget{class_c_coins_view_cache_a1a8cd6069fba96939ffcb1bd36ffb921}\label{class_c_coins_view_cache_a1a8cd6069fba96939ffcb1bd36ffb921}} 
\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Get\+Value\+In@{Get\+Value\+In}}
\index{Get\+Value\+In@{Get\+Value\+In}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection{\texorpdfstring{Get\+Value\+In()}{GetValueIn()}}
{\footnotesize\ttfamily C\+Amount C\+Coins\+View\+Cache\+::\+Get\+Value\+In (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_c_transaction}{C\+Transaction}} \&}]{tx }\end{DoxyParamCaption}) const}

Amount of pivx coming in to a transaction Note that lightweight clients may not know anything besides the hash of previous transactions, so may not be able to calculate this.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em tx} & transaction for which we are checking input total \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Sum of value of all inputs (script\+Sigs) 
\end{DoxyReturn}
\mbox{\Hypertarget{class_c_coins_view_cache_aa8f0c55b6fc207d2188948a565125ab7}\label{class_c_coins_view_cache_aa8f0c55b6fc207d2188948a565125ab7}} 
\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Have\+Coins@{Have\+Coins}}
\index{Have\+Coins@{Have\+Coins}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection{\texorpdfstring{Have\+Coins()}{HaveCoins()}}
{\footnotesize\ttfamily bool C\+Coins\+View\+Cache\+::\+Have\+Coins (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classuint256}{uint256}} \&}]{txid }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}

Just check whether we have data for a given txid. This may (but cannot always) return true for fully spent transactions 

Reimplemented from \mbox{\hyperlink{class_c_coins_view_backed_ad49041658bdec807d556e080476e6543}{C\+Coins\+View\+Backed}}.

\mbox{\Hypertarget{class_c_coins_view_cache_ab67c0d489873ed735c4fc52aa66f0830}\label{class_c_coins_view_cache_ab67c0d489873ed735c4fc52aa66f0830}} 
\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Modify\+Coins@{Modify\+Coins}}
\index{Modify\+Coins@{Modify\+Coins}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection{\texorpdfstring{Modify\+Coins()}{ModifyCoins()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_c_coins_modifier}{C\+Coins\+Modifier}} C\+Coins\+View\+Cache\+::\+Modify\+Coins (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classuint256}{uint256}} \&}]{txid }\end{DoxyParamCaption})}

Return a modifiable reference to a \mbox{\hyperlink{class_c_coins}{C\+Coins}}. If no entry with the given txid exists, a new one is created. Simultaneous modifications are not allowed. 

\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}\label{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}} 
\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!hash\+Block@{hash\+Block}}
\index{hash\+Block@{hash\+Block}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection{\texorpdfstring{hash\+Block}{hashBlock}}
{\footnotesize\ttfamily \mbox{\hyperlink{classuint256}{uint256}} C\+Coins\+View\+Cache\+::hash\+Block\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}

Make mutable so that we can \char`\"{}fill the cache\char`\"{} even from Get-\/methods declared as \char`\"{}const\char`\"{}. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
P\+I\+V\+X/src/coins.\+h\item 
P\+I\+V\+X/src/coins.\+cpp\end{DoxyCompactItemize}
